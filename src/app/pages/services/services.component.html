<div class="row">
  <div style="width: 99%;">
    <div class="page-title-box d-sm-flex align-items-center justify-content-between">
      <h4 class="mb-sm-0">SERVICES</h4>
      <div class="page-title-right">
        <ol class="breadcrumb m-0">
          <ng-container>
            <li class="breadcrumb-item" [ngClass]="{'active': true}">Services
            </li>
          </ng-container>
        </ol>
      </div>

    </div>
  </div>
</div>

<div class="row">
  <div class="col-lg-12">
    <div class="card">
      <div class="card-header">
        <h4 class="card-title mb-0 flex-grow-1">Add, edit and delete the types of services available for appointment
          bookings</h4>
      </div><!-- end card header -->

      <div class="card-body">
        <div class="d-flex align-items-center mb-3 buttons-and-inputs-container"
          style="display: flex;justify-content: space-between;">
          <div class="buttons-and-inputs">
            <div class="d-flex align-items-center ">
              <div class="search-box d-inline-block ">
                <input type="text" class="form-control search" placeholder="Search..." [(ngModel)]="form.search"
                  (ngModelChange)="onValueChange()" style="background-color:#D2F7EB;">
                <i class="ri-search-line search-icon"></i>
              </div>
            </div>
            <div class="buttons-and-inputs-filters">
              <div style="margin-left: 10px;">
                <button type="button" class="btn" style="border-color:#D7DBEC;" nz-button nz-dropdown
                  [nzDropdownMenu]="menu1">
                  {{employeeFilterType}} <span class="ri-arrow-down-s-line"></span>
                  <i nz-icon nzType="down"></i>
                </button>
                <nz-dropdown-menu #menu1="nzDropdownMenu">
                  <ul nz-menu>
                    <ul *ngFor="let data of employeeTypesData">
                      <li *ngIf="employeeFilterType!==data.employeeType" nz-menu-item
                        (click)="employeeFilterTypeSelect(data.employeeType)">{{data.employeeType}}</li>
                    </ul>
                    <li *ngIf="employeeFilterType!=='Filter by Employe Type'" nz-menu-item
                      (click)="employeeFilterTypeSelect('Filter by Employe Type')">Reset</li>
                  </ul>
                </nz-dropdown-menu>
              </div>
              <!-- <div style="margin-left: 10px">
                <button type="button" class="btn" style="border-color:#D7DBEC;" nz-button nz-dropdown
                  [nzDropdownMenu]="menu2">
                  Filter by Employe level <span class="ri-arrow-down-s-line"></span>
                  <i nz-icon nzType="down"></i>
                </button>
                <nz-dropdown-menu #menu2="nzDropdownMenu">
                  <ul nz-menu>
                    <li nz-menu-item>menu2 1st menu item</li>
                    <li nz-menu-item>menu2 2nd menu item</li>
                    <li nz-menu-item>menu2 3rd menu item</li>
                  </ul>
                </nz-dropdown-menu>
              </div> -->
            </div>
          </div>
          <button id="open-services-modal" type="button" class="btn" style="background-color:#21D59B;font-weight: 600;"
            (click)="fullLGModal(fullLgDataModal)">Add Service</button>
          <ng-template #fullLgDataModal let-modal>
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="exampleModalFullscreenXlLabel">X New Service</h5>
                <div>

                  <button *ngIf="isServiceEdit" type="button" class="btn"
                    style="background-color:#21D59B;font-weight: 600;margin-left: 10px;"
                    (click)="onServicesUpdate()">Update
                    Service</button>
                  <button *ngIf="isServiceEdit" type="button" class="btn" style="font-weight: 600;margin-left: 10px;"
                    [style.background-color]="services.active ? 'red' : '#21D59B'" (click)="onServicesDisable()">
                    <div *ngIf="services.active===true">
                      Disable Service
                    </div>
                    <div *ngIf="services.active===false">
                      Enable Service
                    </div>
                  </button>
                  <button *ngIf="!isServiceEdit" type="button" class="btn"
                    style="background-color:#21D59B;font-weight: 600;margin-left: 10px;"
                    (click)="onServiceSubmit()">Save</button>
                  <button type="button" class="btn" id="close-services-modal"
                    style="background-color:white;font-weight: 600;margin-left: 10px;border-color:#D7DBEC;"
                    (click)="modal.dismiss('Cross click');onCancelModal()">Cancel</button>


                </div>
              </div>
              <div class="modal-body" style="background-color:#F5F6FA;margin-top: 20px;padding-top: 30px;">
                <div style="font-weight: 600;font-size: 18px;">
                  Service Details
                </div>
                <p style="margin-bottom: 5px;">
                  Fill in the following details about the service
                </p>
                <div class="col-lg-12" style="margin-top: 10px; margin-bottom: 10px;">
                  <div class="row gy-4">
                    <div class="col-xxl-6 col-md-6">
                      <div>
                        <label class="form-label">Service Title</label>
                        <input type="text" class="form-control" placeholder="Service Title"
                          [(ngModel)]="services.treatmentName" name="treatmentName">
                      </div>
                    </div>

                    <div class="col-xxl-6 col-md-6">
                      <div>
                        <label class="form-label">Employee Type</label>
                        <input type="text" class="form-control" nz-icon nzType="down" name="employeeType"
                          placeholder="Select Employee type" nz-button nz-dropdown [nzDropdownMenu]="employeeType"
                          [(ngModel)]="services.employeeType" name="employeeType">
                        <nz-dropdown-menu #employeeType="nzDropdownMenu">
                          <ul nz-menu>
                            <ul *ngFor="let data of employeeTypesData">
                              <li *ngIf="employeeFilterTypeform!==data.employeeType" nz-menu-item
                                (click)="employeeFilterTypeSelectForm(data.employeeType)">{{data.employeeType}}</li>
                            </ul>
                            <li *ngIf="employeeFilterTypeform!==''" nz-menu-item
                              (click)="employeeFilterTypeSelectForm('')">Reset</li>
                          </ul>
                        </nz-dropdown-menu>
                      </div>
                    </div>

                    <div class="col-xxl-6 col-md-6">
                      <div>
                        <label class="form-label">Service Description</label>
                        <input type="text" class="form-control" placeholder="Description"
                          [(ngModel)]="services.treatmentDescription" name="employeeType">
                      </div>
                    </div>
                  </div>
                </div>
                <div style="margin-top: 10px; margin-bottom: 10px;">
                  <div style="font-weight: 600;margin-bottom: 15px;">
                    PRICE
                  </div>
                  <div class="col-lg-12" style="margin-top: 10px; margin-bottom: 10px;">
                    <div class="row gy-4">
                      <div class="col-xxl-6 col-md-6">
                        <div>
                          <label class="form-label">Price (Rands, excluding VAT)</label>
                          <input type="number" class="form-control" placeholder="Price"
                            [(ngModel)]="services.seniorPrice" name="seniorPrice">
                        </div>
                      </div>
                      <div class="col-xxl-6 col-md-6">
                        <div>
                          <label class="form-label">Duration (In minutes)</label>
                          <input type="number" class="form-control" placeholder="duration"
                            [(ngModel)]="services.duration" name="duration">
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <div style="margin-top: 10px; margin-bottom: 10px;">
                  <div style="font-weight: 600;margin-bottom: 15px;">
                    SPECIAL
                  </div>
                  <div class="col-lg-12" style="margin-top: 10px; margin-bottom: 10px;">
                    <div class="row gy-4">
                      <div class="form-check">
                        <input class="form-check-input" type="checkbox" value="" id="service-remember-check"
                          style="margin-left: -10px;" [(ngModel)]="services.special" name="special">
                        <label class="text-muted" style="margin-left: 10px;" for="service-remember-check">Check to make
                          this a special</label>
                      </div>
                      <div *ngIf="services.special" class="col-xxl-3 col-md-6">
                        <div>
                          <label class="form-label">Special Price (Rands, excluding VAT)</label>
                          <input type="number" class="form-control" placeholder="Special Price"
                            [(ngModel)]="services.specialPrice" name="employeeType">
                        </div>
                      </div>
                      <div *ngIf="services.special" class="col-xxl-3 col-md-6">
                        <div>
                          <label class="form-label">Special end date</label>
                          <input class="form-control flatpickr-input" type="text" mwlFlatpickr [altInput]="true"
                            [convertModelValue]="true" [(ngModel)]="special_date" name="specialEndDate">
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

              </div>
            </div>
          </ng-template>
        </div>
        <div class="table-responsive">
          <nz-table #rowSelectionTable nzShowSizeChanger [nzData]="TableData"
            (nzCurrentPageDataChange)="onCurrentPageDataChange($event)" class="table table-gridjs">
            <thead>
              <tr style="background-color:#D2F7EB;">
                <th style="background-color:#D2F7EB;">Service</th>
                <th style="background-color:#D2F7EB;">Duration</th>
                <th style="background-color:#D2F7EB;">Price</th>
                <th style="background-color:#D2F7EB;">Employee Type</th>
                <th style="background-color:#D2F7EB;">Showing 1-1</th>
              </tr>
            </thead>
            <tbody style="background-color: #F5F6FA;">
              <tr *ngFor="let data of TableData ">
                <td data-column-id="company" class="gridjs-td">{{data.treatmentName}}</td>
                <td data-column-id="company" class="gridjs-td">duration ({{data.duration}} in minutes)</td>
                <td data-column-id="company" class="gridjs-td">R {{data.seniorPrice}}</td>
                <td data-column-id="company" class="gridjs-td">{{data.employeeType}}</td>
                <td data-column-id="company" class="gridjs-td" style="display: flex;flex-direction: row;">

                  <span (click)="servicesEditSelect(data)"
                    style="margin-left: 10px;height: 25px;border-radius:5px;width: 25px;background-color: #7E84A3; display: flex;justify-content: center;align-items: center;"><span
                      class=" ri-edit-fill" style="color: white;font-weight: 600;font-size: 18px;"></span></span>
                  <span *ngIf="data.active===true"
                    style="margin-left: 10px;height: 25px;border-radius:5px;width: 25px;background-color: #21D59B; display: flex;justify-content: center;align-items: center;"><span
                      class="ri-check-fill" style="color: white;font-weight: 600;font-size: 18px;"></span></span>
                  <span *ngIf="data.active===false"
                    style="margin-left: 10px;height: 25px;border-radius:5px;width: 25px;background-color: red; display: flex;justify-content: center;align-items: center;"><span
                      class="ri-close-line" style="color: white;font-weight: 600;font-size: 18px;"></span></span>
                </td>
              </tr>
            </tbody>
          </nz-table>
        </div>
      </div><!-- end card-body -->
    </div><!-- end card -->
  </div>
  <!-- end col -->
</div>

<app-toasts aria-live="polite" aria-atomic="true"></app-toasts>
